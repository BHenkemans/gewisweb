/**
 *  Devbridge Vanilla Autocomplete, version 1.0.0
 *  (c) 2015 Tomas Kirda
 *
 *  Edited by Tom Udding (GEWIS Web Committee), with fixes from the jquery variant. Every `.display` is replaced with
 *  `.visibility`, as plain JavaScript does not know about the dimensions of an element when not displayed.
 *
 *  Devbridge Vanilla Autocomplete is freely distributable under the terms of an MIT license.
 *  For details visit: https://github.com/devbridge/Vanilla-Autocomplete
 */
!function(e){"use strict";var n=27,s=9,i=13,o=38,a=39,r=40,d={};function l(e,t){var n=function(){},s=this,n={ajaxSettings:{},autoSelectFirst:!0,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:l.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:n,onSearchComplete:n,onSearchError:n,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,n){return-1!==e.value.toLowerCase().indexOf(n)},paramName:"query",transformResult:function(e){return"string"==typeof e?JSON.parse(e):e},orientation:"bottom",forceFixPosition:!1,formatGroup:function(e){return'<div class="autocomplete-group"><strong>'+e+"</strong></div>"}};s.element=e,s.suggestions=[],s.badQueries=[],s.selectedIndex=-1,s.currentValue=s.element.value,s.intervalId=0,s.cachedResponse={},s.onChangeInterval=null,s.onChange=null,s.isLocal=!1,s.suggestionsContainer=null,s.options=d.extend({},n,t),s.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},s.hint=null,s.hintValue="",s.selection=null,s.visible=!1,s.initialize(),s.setOptions(t)}d.ajax=function(e,t,n){var s,i=new XMLHttpRequest,o=e.headers||{},a=e.method||e.type||"GET",r="X-Requested-With",l="GET"===a?e.url+"?"+d.param(e.data):e.url;for(s in i.onreadystatechange=function(){4===i.readyState&&(200===i.status?t(i.responseText):n(i))},e.crossDomain||o[r]||(o[r]="XMLHttpRequest"),i.open(a,l,!0),o)o.hasOwnProperty(s)&&i.setRequestHeader(s,o[s]);return i.send(null),i},d.ajaxAbort=function(e){e&&e.abort&&e.abort()},d.param=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&").replace(/%20/g,"+")},d.escapeRegExChars=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},d.createNode=function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.visibility="hidden",t},d.hasClass=function(e,t){e=(e.className||"").split(" ");return-1<d.inArray(t,e)},d.getData=function(e,t){return e.dataset?e.dataset[t]:e.getAttribute("data-"+t)},d.matchElement=function(e,t,n){for(var s=e.target;s;){if(d.hasClass(s,t))return s;if(!(s=s.parentNode)||s===n)return null}},d.extend=function(e){var t,n=arguments.length;for(t=1;t<n;t++)e=function e(t,n){var s,i;for(s in n)n.hasOwnProperty(s)&&(i=n[s],t.hasOwnProperty(s)&&"object"==typeof t[s]&&d.isPlainObject(i)&&!d.isArray(i)?e(t[s],i):t[s]=i);return t}(e,arguments[t]);return e},d.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},d.inArray=function(e,t){for(var n=-1,s=t.length,i=0;i<s;i++)if(e===t[i]){n=i;break}return n},d.toCamelCase=function(e){return e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})},d.css=function(e,t){if("string"==typeof t)return window.getComputedStyle(e).getPropertyValue(t);var n,s,i,o=e.style;for(n in t)t.hasOwnProperty(n)&&(s=d.toCamelCase(n),"number"==typeof(i=t[n])&&-1<d.inArray(s,["width","height","top","left","right","bottom"])&&(i+="px"),o[s]=i)},d.isPlainObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},d.isFunction=function(e){return"function"==typeof e},d.noop=function(){},d.each=function(e,t){for(var n=e.length,s=0;s<n;s++)t(e[s],s)},d.removeClass=function(e,t){var n=e.className.split(" "),s=[];d.each(n,function(e){t!==e&&s.push(e)}),e.className=s.join(" ")},d.addClass=function(e,t){e.className=e.className+" "+t},d.show=function(e){e.style.visibility="visible"},d.hide=function(e){e.style.visibility="hidden"},d.on=function(e,t,n){e.addEventListener(t,n,!1)},l.utils=d,l.formatResult=function(e,t){t="("+d.escapeRegExChars(t)+")";return e.value.replace(new RegExp(t,"gi"),"<strong>$1</strong>")},l.prototype={initialize:function(){var n,s=this,t=s.classes.selected,e=s.options,i=s.element;function o(t){return function(e){t.call(s,e)}}i.setAttribute("autocomplete","off"),s.killerFn=function(){s.killSuggestions(),s.disableKillerFn()},s.suggestionsContainer=d.createNode(e.containerClass),n=s.suggestionsContainer,e.appendTo.appendChild(n),"auto"!==e.width&&d.css(n,{width:e.width}),d.on(n,"mouseover",function(e){e=d.matchElement(e,s.classes.suggestion,n);e&&s.activate(d.getData(e,"index"))}),d.on(n,"mouseout",function(){s.selectedIndex=-1;var e=n.getElementsByClassName(t);d.each(e,function(e){d.removeClass(e,t)})}),d.on(n,"click",function(e){var t=d.matchElement(e,s.classes.suggestion,n);t&&(s.select(d.getData(t,"index")),e.stopPropagation())}),s.fixPositionCapture=function(){s.visible&&s.fixPosition()},d.on(window,"resize",s.fixPositionCapture),d.on(i,"keydown",o(s.onKeyDown)),d.on(i,"keyup",o(s.onKeyUp)),d.on(i,"change",o(s.onKeyUp)),d.on(i,"blur",o(s.onBlur)),d.on(i,"focus",o(s.onFocus))},onFocus:function(){this.options.minChars<=this.element.value.length&&this.onValueChange(),this.fixPosition()},onBlur:function(){this.enableKillerFn()},setOptions:function(e){var t=this,n=t.options;d.extend(n,e),t.isLocal=d.isArray(n.lookup),t.isLocal&&(n.lookup=t.verifySuggestionsFormat(n.lookup)),n.orientation=t.validateOrientation(n.orientation,"bottom"),d.css(t.suggestionsContainer,{"max-height":n.maxHeight+"px",width:n.width+"px","z-index":n.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var e=this;e.disabled=!0,clearInterval(e.onChangeInterval),e.currentRequest&&(d.ajaxAbort(e.currentRequest),e.currentRequest=null)},enable:function(){this.disabled=!1},fixPosition:function(){var e,t,n,s,i,o,a,r,l=this,u=l.suggestionsContainer;u.parentNode!==document.body&&!l.options.forceFixPosition||(r=l.options.orientation,e=u.offsetHeight,t=l.element.offsetHeight,n={top:(a={top:(o=l.element.getBoundingClientRect()).top+window.scrollY,left:o.left+window.scrollX}).top,left:a.left},"auto"===r&&(s=window.innerHeight,o=-(i=window.scrollTop())+a.top-e,a=i+s-(a.top+t+e),r=Math.max(o,a)===o?"top":"bottom"),n.top+="top"===r?-e:t,"auto"===l.options.width&&(n.width=l.element.offsetWidth-2+"px"),d.css(u,n))},enableKillerFn:function(){document.addEventListener("click",this.killerFn)},disableKillerFn:function(){document.removeEventListener("click",this.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.hide(),e.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var e=this.element.value.length,t=this.element.selectionStart;return"number"==typeof t?t===e:!document.selection||((t=document.selection.createRange()).moveStart("character",-e),e===t.text.length)},onKeyDown:function(e){var t=this;if(t.disabled||t.visible||e.which!==r||!t.currentValue){if(!t.disabled&&t.visible){switch(e.which){case n:t.element.value=t.currentValue,t.hide();break;case a:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case s:if(t.hint&&t.options.onHint)return void t.selectHint();if(-1===t.selectedIndex)return void t.hide();if(t.select(t.selectedIndex),!1===t.options.tabDisabled)return;break;case i:if(-1===t.selectedIndex)return void t.hide();t.select(t.selectedIndex);break;case o:t.moveUp();break;case r:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}}else t.suggest()},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case o:case r:return}clearInterval(t.onChangeInterval),t.currentValue!==t.element.value&&(t.findBestHint(),0<t.options.deferRequestBy?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())}},changeValue:function(e){this.element.value=e,this.onValueChange()},onValueChange:function(){var e,t=this,n=t.options,s=t.element.value,i=t.getQuery(s);t.selection&&t.currentValue!==i&&(t.selection=null,(n.onInvalidateSelection||d.noop).call(t.element)),clearInterval(t.onChangeInterval),t.currentValue=s,t.selectedIndex=-1,n.triggerSelectOnValidInput&&-1!==(e=t.findSuggestionIndex(i))?t.select(e):i.length<n.minChars?t.hide():t.getSuggestions(i)},findSuggestionIndex:function(e){var n=-1,s=e.toLowerCase();return this.suggestions.forEach(function(e,t){if(e.value.toLowerCase()===s)return n=t,!1}),n},getQuery:function(e){var t=this.options.delimiter;return t?(t=e.split(t))[t.length-1].trim():e},getSuggestionsLocal:function(t){var e=this.options,n=t.toLowerCase(),s=e.lookupFilter,i=parseInt(e.lookupLimit,10),e={suggestions:e.lookup.filter(function(e){return s(e,t,n)})};return i&&e.suggestions.length>i&&(e.suggestions=e.suggestions.slice(0,i)),e},getSuggestions:function(t){var e,n,s,i=this,o=i.options,a=o.serviceUrl;o.params[o.paramName]=t,s=o.ignoreParams?null:o.params,!1!==o.onSearchStart.call(i.element,o.params)&&(d.isFunction(o.lookup)?o.lookup(t,function(e){i.suggestions=e.suggestions,i.suggest(),o.onSearchComplete.call(i.element,t,e.suggestions)}):(e=i.isLocal?i.getSuggestionsLocal(t):(d.isFunction(a)&&(a=a.call(i.element,t)),n=a+"?"+d.param(s||{}),i.cachedResponse[n]))&&d.isArray(e.suggestions)?(i.suggestions=e.suggestions,i.suggest(),o.onSearchComplete.call(i.element,t,e.suggestions)):i.isBadQuery(t)?o.onSearchComplete.call(i.element,t,[]):(i.currentRequest&&(d.ajaxAbort(i.currentRequest),i.currentRequest=null),s={url:a,data:s,type:o.type,dataType:o.dataType},d.extend(s,o.ajaxSettings),i.currentRequest=d.ajax(s,function(e){i.currentRequest=null;e=o.transformResult(e);i.processResponse(e,t,n),o.onSearchComplete.call(i.element,t,e.suggestions)},function(e){o.onSearchError.call(i.element,t,e)})))},isBadQuery:function(e){var t=this.badQueries,n=t.length;if(!this.options.preventBadQueries)return!1;for(;n--;)if(0===e.indexOf(t[n]))return!0;return!1},hide:function(){var e=this;e.visible=!1,e.selectedIndex=-1,clearInterval(e.onChangeInterval),d.hide(e.suggestionsContainer),e.signalHint(null)},suggest:function(){var e,n,s,i,o,a,t,r,l,u,c,g;0!==this.suggestions.length?(n=(e=this).options,s=n.groupBy,i=n.formatResult,o=e.getQuery(e.currentValue),a=e.classes.suggestion,t=e.classes.selected,r=e.suggestionsContainer,l=n.beforeRender,u="",n.triggerSelectOnValidInput&&-1!==(g=e.findSuggestionIndex(o))?e.select(g):(e.suggestions.forEach(function(e,t){s&&(u+=function(e){e=e.data[s];return c===e?"":(c=e,n.formatGroup(c))}(e)),u+='<div class="'+a+'" data-index="'+t+'">'+i(e,o)+"</div>"}),this.adjustContainerWidth(),r.innerHTML=u,d.isFunction(l)&&l.call(e.element,r),e.fixPosition(),d.show(r),n.autoSelectFirst&&(e.selectedIndex=0,r.scrollTop=0,d.addClass(r.firstChild,t)),e.visible=!0,e.findBestHint())):this.hide()},adjustContainerWidth:function(){var e=this.options,t=this.suggestionsContainer;"auto"===e.width&&(e=this.element.offsetWidth-2,t.style.width=(0<e?e:300)+"px")},findBestHint:function(){var n=this.element.value.toLowerCase(),s=null;n&&(this.suggestions.every(function(e){var t=0===e.value.toLowerCase().indexOf(n);return t&&(s=e),!t}),this.signalHint(s))},signalHint:function(e){var t="",n=this;e&&(t=n.currentValue+e.value.substr(n.currentValue.length)),n.hintValue!==t&&(n.hintValue=t,n.hint=e,(this.options.onHint||d.noop)(t))},verifySuggestionsFormat:function(e){return e.length&&"string"==typeof e[0]?e.map(function(e){return{value:e,data:null}}):e},validateOrientation:function(e,t){return e=(e.trim()||"").toLowerCase(),["auto","bottom","top"].includes(e)||(e=t),e},processResponse:function(e,t,n){var s=this,i=s.options;e.suggestions=s.verifySuggestionsFormat(e.suggestions),i.noCache||(s.cachedResponse[n]=e,i.preventBadQueries&&0===e.suggestions.length&&s.badQueries.push(t)),t===s.getQuery(s.currentValue)&&(s.suggestions=e.suggestions,s.suggest())},activate:function(e){"number"!=typeof e&&(e=parseInt(e,10));var t=this.classes.selected,n=this.suggestionsContainer,s=n.getElementsByClassName(this.classes.suggestion)[e];return d.each(n.getElementsByClassName(t),function(e){d.removeClass(e,t)}),this.selectedIndex=e,d.addClass(s,t),s},selectHint:function(){var e=d.inArray(this.hint,this.suggestions);this.select(e)},select:function(e){this.hide(),this.onSelect(e)},moveUp:function(){var e=this;if(-1!==e.selectedIndex)return 0===e.selectedIndex?(d.removeClass(e.suggestionsContainer.children[0],e.classes.selected),e.selectedIndex=-1,e.element.value=e.currentValue,void e.findBestHint()):void e.adjustScroll(e.selectedIndex-1)},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(e){var t=this,n=t.activate(e),s=n.offsetTop,i=t.suggestionsContainer.scrollTop,o=n.offsetHeight,n=i+t.options.maxHeight-o;s<i?t.suggestionsContainer.scrollTop=s:n<s&&(t.suggestionsContainer.scrollTop=s-t.options.maxHeight+o),t.element.value=t.getValue(t.suggestions[e].value),t.signalHint(null)},onSelect:function(e){var t=this,n=t.options.onSelect,e=t.suggestions[e];t.currentValue=t.getValue(e.value),t.currentValue!==t.element.value&&(t.element.value=t.currentValue),t.signalHint(null),t.suggestions=[],t.selection=e,d.isFunction(n)&&n.call(t.element,e)},getValue:function(e){var t,n=this.options.delimiter;return n?(n=(t=this.currentValue).split(n),t.substr(0,t.length-n[n.length-1].length)+e):e},dispose:function(){var e=this.suggestionsContainer;this.disableKillerFn(),e.parentNode&&e.parentNode.removeChild(e)}},"function"==typeof define&&"object"==typeof define.amd&&define.amd&&define(function(){return l}),e.VanillaAutocomplete=l}(this);
