<div class="container">
    <div class="row">
        <h1><?= $this->translate('Current poll') ?></h1>
    </div>

    <div class="row">
        <?php if (isset($poll)): ?>
            <?= $this->partial('partial/poll.phtml', [
                'poll' => $poll,
                'canVote' => $canVote,
                'userVote' => $userVote,
                'showResults' => true
            ]) ?>
        <?php else: ?>
            <p class="lead"><?= $this->translate('Unfortunately there currently is no poll :('); ?></p>
        <?php endif; ?>
    </div>

    <div class="row">
    <p>
        <?= sprintf('%sRequest a poll%s', '<a href="' . $this->url('poll/request') . '">', '</a>') ?>
    </p>
    </div>

    <div class="row">
        <a href="<?= $this->url('poll/history') ?>" class="pull-left text-uppercase">
             <i class="glyphicon glyphicon-arrow-left" /></i>
            <?= $this->translate('Old polls') ?>
        </a>
    </div>
</div>
<?php else: ?>
    <?= $this->translate('There currently is no poll.'); ?>
<?php endif ?>
<a href="<?= $this->url('poll/request') ?>"><?= $this->translate('Request a poll') ?></a> or
<a href="<?= $this->url('poll/history') ?>"><?= $this->translate('view old polls') ?></a>.

<?php if (isset($poll)): ?>
<div class="row">
    <h2><?= $this->translate('Comments') ?></h2>
    <?php if (count($poll->getComments()) == 0): ?>
        <?= $this->translate('This poll has no comments') ?>
    <?php else: ?>
    <?php foreach ($poll->getComments() as $comment): ?>
    <div class="col-sm-2">
        <strong><?= $comment->getAuthor() ?></strong>
    </div>
    <div class="col-sm-10">
        <?= $comment->getContent() ?>
    </div>
    <?php endforeach ?>
    <?php endif ?>
</div>
<?php endif ?>

