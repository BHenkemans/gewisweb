<?php
$this->headScript()
        ->prependFile($this->basePath() . '/js/photo-admin.js')
        ->prependFile($this->basePath() . '/js/photo.js')
?>
<style>
    .tree, .tree ul {
        margin:0;
        padding:0;
        list-style:none
    }
    .tree ul {
        margin-left:1em;
        position:relative
    }
    .tree ul ul {
        margin-left:.5em
    }
    .tree ul:before {
        content:"";
        display:block;
        width:0;
        position:absolute;
        top:0;
        bottom:0;
        left:0;
        border-left:1px solid
    }
    .tree li {
        margin:0;
        padding:0 1em;
        line-height:2em;
        color:#369;
        font-weight:700;
        position:relative
    }
    .tree ul li:before {
        content:"";
        display:block;
        width:10px;
        height:0;
        border-top:1px solid;
        margin-top:-1px;
        position:absolute;
        top:1em;
        left:0
    }
    .tree ul li:last-child:before {
        background:#fff;
        height:auto;
        top:1em;
        bottom:0
    }
    .indicator {
        margin-right:5px;
    }
    .tree li a {
        text-decoration: none;
        color:#369;
    }
    .tree li button, .tree li button:active, .tree li button:focus {
        text-decoration: none;
        color:#369;
        border:none;
        background:transparent;
        margin:0px 0px 0px 0px;
        padding:0px 0px 0px 0px;
        outline: 0;
    }
    .btn-hidden {
        display:none;
    }
</style>
<div class="row">
    <div class="col-lg-12">
        <h1><?= $this->translate('Photo admin') ?></h1><hr>
    </div>
</div>
<div class="row">
    <div class="col-lg-3">
        <div class="panel panel-default">
            <div class="panel-body">
                <ul class="tree">
                    <?php

                    function showTree($albums)
                    {
                        ?>

                        <?php foreach ($albums as $album): ?>
                            <li><a href="photo/album/<?= $album->getId() ?>"><?= $album->getName() ?></a>
                                <?php if (count($album->getChildren()) > 0): ?>
                                    <ul>
                                        <?= showTree($album->getChildren()) ?>
                                    </ul>
                                <?php endif ?>
                            </li>
                        <?php endforeach ?>

                    <?php } ?>
                    <?= showTree($albums) ?>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-lg-9">
        <ol class="breadcrumb">
            <li><a href="#">2014-2015</a></li>
            <li><a href="#">Test album #2</a></li>
            <li class="active">Super awesome sub album #4</li>
        </ol>
        <button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-edit"></span>&nbsp;<?= $this->translate('Modify details') ?></button> 
        <button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-upload"></span>&nbsp;<?= $this->translate('Add photos') ?></button> 
        <button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;<?= $this->translate('Move album') ?></button> 
        <button type="button" class="btn btn-danger"><span class="glyphicon glyphicon-trash"></span>&nbsp;<?= $this->translate('Delete album') ?></button>
        <button type="button" class="btn btn-danger btn-hidden" id="remove-multiple"><span class="glyphicon glyphicon-trash"></span>&nbsp;<?= $this->translate('Delete %i photos') ?></button>
        <button type="button" class="btn btn-success"><span class="glyphicon glyphicon-globe"></span>&nbsp;<?= $this->translate('Make album private') ?></button>

        <hr>

        <nav><ul class="pagination" id="paging"></ul></nav>
        <div id="album"></div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $('.tree').treed();
        Photo.initAdmin();
    });
</script>